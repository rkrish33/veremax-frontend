<div class="col-sm-12">
  <div class="card">
    <div class="card-header">
      <h1 class="header-title mt-0">{{prtypeid ? "EDIT":"ADD"}} Rental Details</h1>
    </div>
    <form [formGroup]="rentalForm" (ngSubmit)="onSubmit()">
      <div class="card-body">
        <div class="row" style="margin: 0.1 px; max-width: 900px;">
          <div class="col-sm-4">
            <div class="form-group">
              <label>Create Type<span style="color: rgb(235, 12, 12);">*</span></label>
              <select class="form-control" formControlName="create_type">
                <option value="1">Individual</option>
                <option value="2">Bulk</option>
              </select>
              <div *ngIf="submit && form.create_type.errors" class="invalid-feedback">
                <span *ngIf="form.create_type.errors.required">Create Type Required!</span>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="form['create_type'].value=='2'">
          <div class="col-md-5">
            <div class="form-group row">
              <div class="col-sm-6">
                <a href="\assets\public\Frt_Room_Bulk.xlsx" target="_blank" download><b style="color: blue;">DOWNLOAD SAMPLE HERE</b></a>
              </div>
            </div>
            <div class="form-group row" style="margin: 0.1 px; max-width: 900px;">
              <div class="col-sm-8">
                <input #myFile type="file" (change)="changeListener($event.target.files[0])" class="form-control" accept=".xlsx" />
              </div>
            </div>
          </div>
        </div>
        <ngb-tabset *ngIf="form['create_type'].value=='1'" type="pills" justify="justified"
          class="navtab-bg nav-justified" style="background-color: rgb(52, 57, 127);">
          <ngb-tab title="Owner Details">
            <ng-template ngbTabContent class="nav-item">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>House Owner Name</label>
                    <input type="text" class="form-control" formControlName="ownername" placeholder=" Enter Owner Name"
                      [ngClass]="{'is-invalid' : submit && form.ownername.errors}">
                    <div *ngIf="submit && form.ownername.errors" class="invalid-feedback">
                      <span *ngIf="form.ownername.errors.required">Enter Owner Name</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Owner Address</label>
                    <input type="text" class="form-control" formControlName="owner_address" placeholder=" Enter House Owner Address"
                      [ngClass]="{'is-invalid' : submit && form.owner_address.errors}">
                    <div *ngIf="submit && form.owner_address.errors" class="invalid-feedback">
                      <span *ngIf="form.owner_address.errors.required">Enter House Owner Address</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Rental Address</label>
                    <input type="text" class="form-control" formControlName="address" placeholder=" Enter House Address"
                      [ngClass]="{'is-invalid' : submit && form.address.errors}">
                    <div *ngIf="submit && form.address.errors" class="invalid-feedback">
                      <span *ngIf="form.address.errors.required">Enter House Address</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Room Category</label>
                    <auto-completen
                      [addclass]="{' form-control' : true,'form-control-danger':form.room_cat.invalid&&submit}"
                      optValues="room_category" placeholder="Select Rent Category" formControlName="room_cat" optId="id"
                      [item]="room_cat">
                    </auto-completen>
                    <div *ngIf="submit && form.room_cat.errors" class="invalid-feedback">
                      <span *ngIf="form.room_cat.errors.required">Please Select Root Category </span>
                    </div>
                  </div>
                </div>

                <!-- <div class="col-sm-4">
                  <div class="form-group">
                    <label>Room Category</label>
                    <select class="form-control" formControlName="room_cat">
                      <option value="1">FRT</option>
                      <option value="2">Ware House</option>
                      <option value="3">FTTX</option>
                      <option value="4">Utility</option>
                      <option value="5">Routeguard</option>
                    
                    </select>
                    <div *ngIf="submit && form.room_cat.errors" class="invalid-feedback">
                      <span *ngIf="form.room_cat.errors.required">Select Room Category
                      </span>
                    </div>
                  </div>
                </div> -->

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Phone Number</label>
                    <input type="text" class="form-control" formControlName="phonenumber"
                      placeholder="Enter phonenumber Number"
                      [ngClass]="{'is-invalid': submit && form.phonenumber.errors}">
                    <div *ngIf="submit && form.phonenumber.errors" class="invalid-feedback">
                      <span *ngIf="form.phonenumber.errors.required">Enter Phone Number</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" formControlName="email" placeholder="Enter Email Id"
                      [ngClass]="{'is-invalid': submit && form.email.errors}">
                    <div *ngIf="submit && form.email.errors" class="invalid-feedback">
                      <span *ngIf="form.email.errors.required">Enter Email Id</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Aadhar Number</label>
                    <input type="text" class="form-control" formControlName="aadharno" placeholder="Enter Aadhar Number"
                      [ngClass]="{'is-invalid': submit && form.aadharno.errors}">
                    <div *ngIf="submit && form.aadharno.errors" class="invalid-feedback">
                      <span *ngIf="form.aadharno.errors.required">Enter Aadhar Number</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Pan Number</label>
                    <input type="text" class="form-control" formControlName="panno" placeholder="Enter Pan Number"
                      [ngClass]="{'is-invalid': submit && form.panno.errors}">
                    <div *ngIf="submit && form.panno.errors" class="invalid-feedback">
                      <span *ngIf="form.panno.errors.required">Enter PAN Number</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Bank Name</label>
                    <input type="text" class="form-control" formControlName="bank_name" placeholder="Enter Bank Name"
                      [ngClass]="{'is-invalid': submit && form.bank_name.errors}">
                    <div *ngIf="submit && form.bank_name.errors" class="invalid-feedback">
                      <span *ngIf="form.bank_name.errors.required">Enter The Bank name</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Account Holder Name</label>
                    <input type="text" class="form-control" formControlName="acnt_name"
                      placeholder="Enter Account Holder Name"
                      [ngClass]="{'is-invalid': submit && form.acnt_name.errors}">
                    <div *ngIf="submit && form.acnt_name.errors" class="invalid-feedback">
                      <span *ngIf="form.acnt_name.errors.required">Enter The Account NAme</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Account Number</label>
                    <input type="text" class="form-control" formControlName="acnt_no" placeholder="Enter Account Number"
                      [ngClass]="{'is-invalid': submit && form.acnt_no.errors}">
                    <div *ngIf="submit && form.acnt_no.errors" class="invalid-feedback">
                      <span *ngIf="form.acnt_no.errors.required">Enter Account No</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>IFSC Code</label>
                    <input type="ifsc_Code" class="form-control" formControlName="ifsc_no" placeholder="Enter IFSC Code"
                      [ngClass]="{'is-invalid': submit && form.ifsc_no.errors}">
                    <div *ngIf="submit && form.ifsc_no.errors" class="invalid-feedback">
                      <span *ngIf="form.ifsc_no.errors.required">Enter The IFSC Code</span>
                    </div>
                  </div>
                </div>

                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Branch Address</label>
                    <textarea type="text" class="form-control" formControlName="bank_branch"
                      placeholder="Enter Branch Address"
                      [ngClass]="{'is-invalid': submit && form.bank_branch.errors}"></textarea>
                    <div *ngIf="submit && form.bank_branch.errors" class="invalid-feedback">
                      <span *ngIf="form.bank_branch.errors.required">Enter The Branch Address</span>
                    </div>
                  </div>
                </div>
              

              <div class="col-sm-4">
                <div class="form-group">
                  <label>Aadhar Upload</label>
                  <input type="file" class="form-control" id="formFile" multiple
                    (change)="upload($event.target.files[0],1)" formControlName="aadharcopy"
                    [ngClass]="{'is-invalid': submit && form.aadharcopy.errors}">
                  <div *ngIf="submit && form.aadharcopy.errors" class="invalid-feedback">
                    <span *ngIf="form.aadharcopy.errors.required">Choose the file</span>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="form-group">
                  <label>Agreement Copy Upload</label>
                  <input type="file" class="form-control" id="formFile" multiple
                    (change)="upload($event.target.files[0],2)" formControlName="agreementcopy"
                    [ngClass]="{'is-invalid': submit && form.agreementcopy.errors}">
                  <div *ngIf="submit && form.agreementcopy.errors" class="invalid-feedback">
                    <span *ngIf="form.agreementcopy.errors.required">Choose the file</span>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="form-group">
                  <label>Mail Copy Upload</label>
                  <input type="file" class="form-control" id="formFile" multiple
                    (change)="upload($event.target.files[0],3)" formControlName="mailcopy"
                    [ngClass]="{'is-invalid': submit && form.mailcopy.errors}">
                  <div *ngIf="submit && form.mailcopy.errors" class="invalid-feedback">
                    <span *ngIf="form.mailcopy.errors.required">Choose the file</span>
                  </div>
                </div>
              </div>
              <div class="col-sm-12" *ngIf="imageURL!=''">
                <label>File Preview</label>
                <br>
                <img *ngFor="let url of imageURL" [src]="url" style="width: 50%;height: 50%">
              </div>
            </div>

            </ng-template>
          </ngb-tab>
          <ngb-tab title="Payment Details">
            <ng-template ngbTabContent class="nav-item">
              <div class="row">
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Room Advance Amount</label>
                    <input type="text" class="form-control" formControlName="roomadvance"
                      placeholder="Enter Room Advance" [ngClass]="{'is-invalid': submit && form.roomadvance.errors}">
                    <div *ngIf="submit && form.roomadvance.errors" class="invalid-feedback">
                      <span *ngIf="form.roomadvance.errors.required">Enter Room Advance Amount</span>
                    </div>
                  </div>
                </div>
                <!-- <div class="col-sm-4">
                  <div class="form-group">
                    <label>Date Of Advance Paid</label>
                    <input type="date" class="form-control" formControlName="advance_date"
                      placeholder="Advance Paid Date" [ngClass]="{'is-invalid': submit && form.advance_date.errors}">
                    <div *ngIf="submit && form.advance_date.errors" class="invalid-feedback">
                      <span *ngIf="form.advance_date.errors.required">Fill Advance Paid Date</span>
                    </div>
                  </div>
                </div> -->
                <!-- <div class="col-sm-4">
                  <div class="form-group">
                    <label>Payment Mode</label>
                    <select class="form-control" formControlName="payment_mode"
                      [ngClass]="{ 'is-invalid': submit && form.payment_mode.errors }">
                      <option value="">Select the Payment to</option>
                      <option value="1">To Account</option>
                      <option value="2">By Hand Cash</option>
                    </select>
                    <div *ngIf="submit && form.payment_mode.errors" class="invalid-feedback">
                      <span *ngIf="form.payment_mode.errors.required">Please Select Payment Mode</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4" *ngIf="form['payment_mode'].value=='1'">
                  <div class="form-group">
                    <label>UTR No</label>
                    <input type="text" class="form-control" formControlName="utrno" placeholder="Enter UTR No"
                      [ngClass]="{'is-invalid': submit && form.utrno.errors}">
                    <div *ngIf="submit && form.utrno.errors" class="invalid-feedback">
                      <span *ngIf="form.utrno.errors.required">Enter the UTR No</span>
                    </div>
                  </div>
                </div> -->
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Monthly Rental Amount</label>
                    <input type="text" class="form-control" formControlName="monthly_rent"
                      placeholder="Enter Monthly Rent" [ngClass]="{'is-invalid': submit && form.monthly_rent.errors}">
                    <div *ngIf="submit && form.monthly_rent.errors" class="invalid-feedback">
                      <span *ngIf="form.monthly_rent.errors.required">Enter Monthly rent</span>
                    </div>
                  </div>
                </div>
                <!-- <div class="col-sm-4">
                  <div class="form-group">
                    <label>Monthly Rent Paid Date</label> 
                    <input type="date" class="form-control" formControlName="rent_date" placeholder="Enter Monthly Date"
                      [ngClass]="{'is-invalid': submit && form.rent_date.errors}">
                    <div *ngIf="submit && form.rent_date.errors" class="invalid-feedback">
                      <span *ngIf="form.rent_date.errors.required">Select Monthly Date</span>
                    </div>
                  </div>
                </div> -->
                <!-- <div class="col-sm-4">
                  <div class="form-group">
                    <label>UTR No</label>
                    <input type="text" class="form-control" formControlName="utrno" placeholder="Enter UTR No"
                      [ngClass]="{'is-invalid': submit && form.utrno.errors}">
                    <div *ngIf="submit && form.utrno.errors" class="invalid-feedback">
                      <span *ngIf="form.utrno.errors.required">Enter the UTR No</span>
                    </div>
                  </div>
                </div> -->
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Project Name</label>
                    <auto-completen
                      [addclass]="{' form-control' : true,'form-control-danger':form.project_id.invalid&&submit}"
                      optValues="project_title" placeholder="Select Project Name" formControlName="project_id"
                      optId="project_id" [item]="projects">
                    </auto-completen>
                    <div *ngIf="submit && form.project_id.errors" class="invalid-feedback">
                      <span *ngIf="form.project_id.errors.required">Please Select The projectname </span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label for="Circle stats">State</label>
                    <auto-completen
                      [addclass]="{'form-control' : true,'form-control-danger':form.circle_name.invalid && submit}"
                      optValues="name" (keyUp)="circle($event)" (changed)="changeCluster()" placeholder="Select State"
                      formControlName="circle_name" Id="id" [item]="circles">
                    </auto-completen>
                    <div *ngIf="submit && form.circle_name.errors" class="invalid-feedback">
                      <span *ngIf="form.circle_name.errors.required">Circle type is required</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>District</label>
                    <auto-completen
                      [addclass]="{'form-control' : true,'form-control-danger':form.cluster.invalid && submit}"
                      optValues="name" (keyUp)="changeCluster($event)" placeholder="Select District"
                      formControlName="cluster" Id="id" [item]="clusters">
                    </auto-completen>
                    <div *ngIf="submit && form.cluster.errors" class="invalid-feedback">
                      <span *ngIf="form.cluster.errors.required">Please Select Cluster</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Sub Location</label>
                    <input type="text" class="form-control" formControlName="sublocation"
                      placeholder="Enter Sub Location" [ngClass]="{'is-invalid': submit && form.sublocation.errors}">
                    <div *ngIf="submit && form.sublocation.errors" class="invalid-feedback">
                      <span *ngIf="form.sublocation.errors.required">Enter Sub Location</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Approving Manager</label>
                    <input type="text" class="form-control" formControlName="approving_manager"
                      placeholder="Enter Approval Manager Name"
                      [ngClass]="{'is-invalid': submit && form.approving_manager.errors}">
                    <div *ngIf="submit && form.approving_manager.errors" class="invalid-feedback">
                      <span *ngIf="form.approving_manager.errors.required">Plear Enter Approving Manager</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Active Date</label>
                    <input type="date" class="form-control" formControlName="active_date"
                      placeholder="Enter Active Date" [ngClass]="{'is-invalid': submit && form.active_date.errors}">
                    <div *ngIf="submit && form.active_date.errors" class="invalid-feedback">
                      <span *ngIf="form.active_date.errors.required">Select Room Active Date</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Closing Date</label>
                    <input type="date" class="form-control" formControlName="closing_date"
                      placeholder="Enter Closing Date" [ngClass]="{'is-invalid': submit && form.closing_date.errors}">
                    <div *ngIf="submit && form.closing_date.errors" class="invalid-feedback">
                      <span *ngIf="form.closing_date.errors.required">Select Closing Date</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Agreement Active Date</label>
                    <input type="date" class="form-control" formControlName="agr_active_date"
                      placeholder="Enter Active Date" [ngClass]="{'is-invalid': submit && form.agr_active_date.errors}">
                    <div *ngIf="submit && form.agr_active_date.errors" class="invalid-feedback">
                      <span *ngIf="form.agr_active_date.errors.required">Select Agreement Active Date</span>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="form-group">
                    <label>Agreement Expiry Date</label>
                    <input type="date" class="form-control" formControlName="agr_expiry_date"
                      placeholder="Enter Closing Date" [ngClass]="{'is-invalid': submit && form.agr_expiry_date.errors}">
                    <div *ngIf="submit && form.agr_expiry_date.errors" class="invalid-feedback">
                      <span *ngIf="form.agr_expiry_date.errors.required">Select Agreement Expiry Date</span>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
      <div class="card-footer">
        <div style="text-align: center;">
          <button type="submit" class="btn btn-success">{{prtypeid ? "Update":"Submit"}}</button>&nbsp;&nbsp;
          <button type="button" (click)="onReset(rentalForm)" class="btn btn-danger">Reset</button>
        </div>
      </div>
    </form>
  </div>
</div>